<div class="container mt-5">
    <div class="row">
      <div class="col-md-6 d-flex flex-column">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title fw-bold mb-3">WHO Triage Input</h5>

            <form [formGroup]="triageForm" [ngClass]="{ 'submitted': submitted }">
                <div class="form-group mb-3">
                  <input type="text" placeholder="Patient Name" class="form-control mb-2" formControlName="name" />
                  <!-- <div *ngIf="triageForm.get('name')?.errors?.['required'] && triageForm.get('name')?.touched" class="error">
                    Name is required
                  </div>                   -->
                </div>
              
                <div class="form-group mb-3">
                  <input type="text" placeholder="UHID Number" class="form-control mb-2" formControlName="uhid" />
                  <!-- <div *ngIf="triageForm.get('uhid')?.invalid && triageForm.get('uhid')?.touched" class="error">UHID is required</div> -->
                </div>
              
                <div class="form-group mb-3">
                  <input type="date" class="form-control mb-2" formControlName="age" (change)="onDOBChange()" />
                </div>
              
                <div class="form-group mb-3">
                  <select class="form-control mb-2" formControlName="gender">
                    <option value="" disabled selected>Select Gender</option>
                    <option value="M">Male</option>
                    <option value="F">Female</option>
                    <option value="O">Others</option>
                  </select>
                  <!-- Optional: show error on submit -->
                  <!--
                  <div *ngIf="submitted && triageForm.get('gender')?.invalid" class="error">
                    Gender is required
                  </div>
                  -->
                </div>
              
                <div class="form-group mb-3">
                  <input type="number" placeholder="Heart Rate" class="form-control mb-2" formControlName="heartRate" />
                  <!-- <div *ngIf="triageForm.get('heartRate')?.invalid && triageForm.get('heartRate')?.touched" class="error">Heart Rate is required</div> -->
                </div>
              
                <div class="form-group mb-3">
                  <input type="number" placeholder="Respiratory Rate" class="form-control mb-2" formControlName="respiratoryRate" />
                  <!-- <div *ngIf="triageForm.get('respiratoryRate')?.invalid && triageForm.get('respiratoryRate')?.touched" class="error">Respiratory Rate is required</div> -->
                </div>
              
                <div class="form-group mb-3">
                  <input type="text" placeholder="Blood Pressure (e.g. 120/80)" class="form-control mb-2" formControlName="bp" />
                  <!-- <div *ngIf="triageForm.get('bp')?.invalid && triageForm.get('bp')?.touched" class="error">Blood Pressure is required</div> -->
                </div>
              
                <div class="form-group mb-3">
                  <input type="number" placeholder="Temperature (°C)" class="form-control mb-2" formControlName="temperature" />
                  <!-- <div *ngIf="triageForm.get('temperature')?.invalid && triageForm.get('temperature')?.touched" class="error">Temperature is required</div> -->
                </div>
              
                <div class="form-group mb-3">
                  <input type="number" placeholder="SpO₂ (%)" class="form-control mb-2" formControlName="spo2" />
                  <!-- <div *ngIf="triageForm.get('spo2')?.invalid && triageForm.get('spo2')?.touched" class="error">SpO₂ is required</div> -->
                </div>
              
                <div class="form-group mb-3">
                  <textarea placeholder="Chief Complaint" class="form-control mb-2" formControlName="complaint"></textarea>
                  <!-- <div *ngIf="triageForm.get('complaint')?.invalid && triageForm.get('complaint')?.touched" class="error">Complaint is required</div> -->
                </div>
              
                <button type="button" (click)="handleSubmit()" class="btn btn-primary">Submit</button>
              </form>
              

          </div>
        </div>
      </div>  

        <div class="col-md-6 d-flex flex-column">
            <div class="card">
            <div class="card-body">
                <h5 class="card-title fw-bold mb-3">Real-Time ER Triage Alerts</h5>
        
                <div class="alert-container" style="overflow-y: auto; flex-grow: 1;">
                <div *ngFor="let alert of alerts" class="border rounded p-3 mb-3">
                    <strong>{{ alert.patient }}</strong>
                    <span
                    class="badge ms-2"
                    [ngClass]="{
                        'bg-danger text-white': alert.priority === 'High',
                        'bg-warning text-dark': alert.priority === 'Medium',
                        'bg-success text-white': alert.priority === 'Low'
                    }"
                    >
                    {{ alert.priority }} Priority
                    </span>
                    <div class="small text-muted mt-1">Alerted {{ alert.time }}</div>
                </div>
                </div>
            </div>
            </div>
        </div>
      
    </div>
  </div>
  